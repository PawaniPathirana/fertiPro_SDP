

<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
        <title>cms dashboard
		</title>
	    <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="css/bootstrap.min.css">
	    <!----css3---->
        <link rel="stylesheet" href="css/sidebar/custom.css">
		<!-- SLIDER REVOLUTION 4.x CSS SETTINGS -->
	
	<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">

	
	
	
	<!--google material icon-->
        <link href="https://fonts.googleapis.com/css2?family=Material+Icons"
      rel="stylesheet">
  </head>
  <body>
  



<div class="wrapper">


<div class="body-overlay"></div>


        <!-- Sidebar  -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <h3><img src="img/logo.png" class="img-fluid"/><span>Welcome!</span></h3>
            </div>
            <ul class="list-unstyled components">
			<li  class="active">
                    <a href="#" class="dashboard"><i class="material-icons">dashboard</i><span>Dashboard</span></a>
                </li>
		
		      <div class="small-screen navbar-display">
                <li class="dropdown d-lg-none d-md-block d-xl-none d-sm-block">
                    <a href="#homeSubmenu0" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
					<i class="material-icons">notifications</i><span> 4 notification</span></a>
                    <ul class="collapse list-unstyled menu" id="homeSubmenu0">
                                    <li>
                                    <a href="#">You have 5 new messages</a>
                                    </li>
                                    <li>
                                        <a href="#">You're now friend with Mike</a>
                                    </li>
                                    <li>
                                        <a href="#">Wish Mary on her birthday!</a>
                                    </li>
                                    <li>
                                        <a href="#">5 warnings in Server Console</a>
                                    </li>
                    </ul>
                </li>
				
				<li  class="d-lg-none d-md-block d-xl-none d-sm-block">
                    <a href="#"><i class="material-icons">apps</i><span>apps</span></a>
                </li>
				
				 <li  class="d-lg-none d-md-block d-xl-none d-sm-block">
                    <a href="#"><i class="material-icons">person</i><span>user</span></a>
                </li>
				
				<li  class="d-lg-none d-md-block d-xl-none d-sm-block">
                    <a href="#"><i class="material-icons">settings</i><span>setting</span></a>
                </li>
				</div>
			
			
                <li class="dropdown">
                    <a href="MAHomeFertilizerData.php" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
					<i class="material-icons">aspect_ratio</i><span>Add Fertilizer Data</span></a>
                   
                    
                </li>
                
                <li class="dropdown">
                    <a href="MAHomeViewFerti.php" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
					<i class="material-icons">apps</i><span>View Fertilizer Data</span></a>
                    <ul class="collapse list-unstyled menu" id="pageSubmenu2">
                        <li>
                            <a href="#">Page 1</a>
                        </li>
                        <li>
                            <a href="#">Page 2</a>
                        </li>
                        <li>
                            <a href="#">Page 3</a>
                        </li>
                    </ul>
                </li>
				
				
				  <li class="dropdown">
                    <a href="MAHomeStockReview.php" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
					<i class="material-icons">extension</i><span>Stock Review</span></a>
                    <ul class="collapse list-unstyled menu" id="pageSubmenu4">
                        <li>
                            <a href="#">Page 1</a>
                        </li>
                        <li>
                            <a href="#">Page 2</a>
                        </li>
                        <li>
                            <a href="#">Page 3</a>
                        </li>
                    </ul>
                </li>
				
				<li class="dropdown">
                    <a href="MAHomeArOrders.php" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
					<i class="material-icons">border_color</i><span>Deliver orders</span></a>
                    <ul class="collapse list-unstyled menu" id="pageSubmenu5">
                        <li>
                            <a href="#">Page 1</a>
                        </li>
                        <li>
                            <a href="#">Page 2</a>
                        </li>
                        <li>
                            <a href="#">Page 3</a>
                        </li>
                    </ul>
                </li>
               
               
			   
			  
               
			   
			     <li class="dropdown">
                    <a href="MAHomeAddStock.php" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
					<i class="material-icons"  href="ARHome.php">content_copy</i><span>Add Stock</span></a>
                    <ul class="collapse list-unstyled menu" id="pageSubmenu7">
                        <li>
                        <a href="ARHome.php">Link to ARHome.php</a>
                        </li>
                        <li>
                            <a href="#">Page 2</a>
                        </li>
                        <li>
                            <a href="#">Page 3</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="MAHomeArOrders.php" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
					<i class="material-icons"  href="ARHome.php">content_copy</i><span>Divisional Orders</span></a>
                    <ul class="collapse list-unstyled menu" id="pageSubmenu7">
                        <li>
                        <a href="ARHome.php">Link to ARHome.php</a>
                        </li>
                        <li>
                            <a href="#">Page 2</a>
                        </li>
                        <li>
                            <a href="#">Page 3</a>
                        </li>
                    </ul>
                </li>
               
               <li class="">
                    <a href="MAHomeGenRep.php"><i class="material-icons">date_range</i><span>Generate Reports</span></a>
                </li>
				
				
                <li class="dropdown">
                    <a href="MAHomeAddAssociationmembeInfo.php" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
					<i class="material-icons">apps</i><span>Add Association member Info</span></a>
                    <ul class="collapse list-unstyled menu" id="pageSubmenu2">
                        <li>
                            <a href="#">Page 1</a>
                        </li>
                        <li>
                            <a href="#">Page 2</a>
                        </li>
                        <li>
                            <a href="#">Page 3</a>
                        </li>
                    </ul>
                </li>
				
                <li class="dropdown">
                    <a href="search.php" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
					<i class="material-icons"  href="search.php">content_copy</i><span>Farmer Info</span></a>
                    <ul class="collapse list-unstyled menu" id="pageSubmenu2">
                        <li>
                            <a href="#">Page 1</a>
                        </li>
                        <li>
                            <a href="#">Page 2</a>
                        </li>
                        <li>
                            <a href="#">Page 3</a>
                        </li>
                    </ul>
                </li>
               
            </ul>

           
        </nav>
		
		

        <!-- Page Content  -->
        <div id="content">
		
		<div class="top-navbar">
            <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">

                    <button type="button" id="sidebarCollapse" class="d-xl-block d-lg-block d-md-mone d-none">
                        <span class="material-icons">arrow_back_ios</span>
                    </button>
					
					<a class="navbar-brand" href="#"> Management Assistant </a>
					
                    <button class="d-inline-block d-lg-none ml-auto more-button" type="button" data-toggle="collapse"
					data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="material-icons">more_vert</span>
                    </button>

                    <div class="collapse navbar-collapse d-lg-block d-xl-block d-sm-none d-md-none d-none" id="navbarSupportedContent">
                        <ul class="nav navbar-nav ml-auto">   
                            <li class="dropdown nav-item active">
                                <a href="#" class="nav-link" data-toggle="dropdown">
                                   <span class="material-icons">notifications</span>
								   <span class="notification">4</span>
                               </a>
                                
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">
								<span class="material-icons">apps</span>
								</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">
								<span class="material-icons">person</span>
								</a>
                            </li>
							<li class="nav-item">
                                <a class="nav-link" href="#">
								<span class="material-icons">settings</span>
								</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
	    </div>
			
			
			
					
					
                    <div class="row mx-auto">
                        <div class="col-lg-12 col-md-9 text-center">
                            <div class="card" style="min-height: 485px">
                                <div class="card-header card-header-text">
                                <?php
// Include database connection file (dbConn.php)
include "dbConn.php";

//session_start();
if ($con === false) {
    die("Connection error");
}

// Get the number of farmers in the "farmers" table
$sql_farmers_count = "SELECT COUNT(*) AS numFarmers FROM farmers";
$result_farmers_count = $con->query($sql_farmers_count);

if ($result_farmers_count === false) {
    die("Error executing the query: " . $con->error);
}

$row_farmers_count = $result_farmers_count->fetch_assoc();
$num_farmers = $row_farmers_count['numFarmers'];

$result_farmers_count->free_result();

// Get the number of eligible farmers and not eligible farmers
$sql_eligible = "SELECT eligibilityStatus, COUNT(*) AS countEligible FROM fieldvisit GROUP BY eligibilityStatus";
$result_eligible = $con->query($sql_eligible);

if ($result_eligible === false) {
    die("Error executing the query: " . $con->error);
}

$count_eligible = 0;
$count_not_eligible = 0;

while ($row = $result_eligible->fetch_assoc()) {
    if ($row['eligibilityStatus'] == 'Eligible') {
        $count_eligible = $row['countEligible'];
    } else if ($row['eligibilityStatus'] == 'Not Eligible') {
        $count_not_eligible = $row['countEligible'];
    }
}

$result_eligible->free_result();

// Get the number of farmers who have not had field visits yet
$sql_not_visited = "SELECT COUNT(*) AS countNotVisited FROM farmers 
                    LEFT JOIN fieldvisit ON farmers.farmerID = fieldvisit.farmerID 
                    WHERE fieldvisit.farmerID IS NULL";

$result_not_visited = $con->query($sql_not_visited);

if ($result_not_visited === false) {
    die("Error executing the query: " . $con->error);
}

$row_not_visited = $result_not_visited->fetch_assoc();
$count_not_visited = $row_not_visited['countNotVisited'];

$result_not_visited->free_result();

// Close the connection
$con->close();
?>

<!DOCTYPE html>
<html>
<head>
    <title>Farmers Information</title>
    <!-- Add Google Charts API -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <!-- Add Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
   
    <h1>Farmer Information</h1>
    <div class="row">
        <!-- Content Column -->
        <div class="col-md-6">
            <p>Number of Farmers Who Register With The System: <?php echo $num_farmers; ?></p>
            <p>Number of Eligible Farmers: <?php echo $count_eligible; ?></p>
            <p>Number of Not Eligible Farmers: <?php echo $count_not_eligible; ?></p>
            <p>Number of Farmers Not Visited Yet by an Officer: <?php echo $count_not_visited; ?></p>
        </div>
        <!-- Graph Column -->
        <div class="col-md-6">
            <!-- Add the canvas element for the pie chart -->
            <div class="d-flex justify-content-center"></div>
            <div id="pieChart" style="width: 600px; height: 600px;"></div> <!-- Updated chart size -->
        </div>
    </div>

    <!-- JavaScript section for creating the pie chart -->
    <script>
        // Load Google Charts API
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawPieChart);

        function drawPieChart() {
            // Get the data from PHP variables
            var numEligible = <?php echo $count_eligible; ?>;
            var numNotEligible = <?php echo $count_not_eligible; ?>;
            var numNotVisited = <?php echo $count_not_visited; ?>;

            // Create the data table
            var data = google.visualization.arrayToDataTable([
                ['Status', 'Count'],
                ['Eligible', numEligible],
                ['Not Eligible', numNotEligible],
                ['Not Visited Yet', numNotVisited]
            ]);

            // Set chart options
            var options = {
                pieHole: 0.3,
                colors: ['#36a2eb', '#ff6384', '#ffce56']
            };

            // Instantiate and draw the pie chart
            var chart = new google.visualization.PieChart(document.getElementById('pieChart'));
            chart.draw(data, options);
        }
    </script>
</body>
</html>


    </div>

                        </div>
                        <div class="row mx-auto">
                        
                        <div class="col-lg-9 col-md-9 text-center">
                            <div class="card" style="min-height: 485px">
                                <div class="card-header card-header-text">
                                   
                                </div>
                                <div class="card-content">
                                    <div class="streamline">
                                        <div class="sl-item sl-primary">
                                            <div class="sl-content">
                                            <!DOCTYPE html>
                                            <!DOCTYPE html>
<html>
<head>
    <title>Division Order Comparison</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <?php
    // Replace the database credentials with your own
    include "dbConn.php";

    //session_start();
    if ($con === false) {
        die("Connection error");
    }

    $gnDivisions = ['Division xxx-1', 'Division yyy-2', 'Division zzz-3'];
    $totalDeliveredPrices = [25000, 18000, 32000];
    $totalNotDeliveredPrices = [8000, 12000, 5000];
    ?>
    
    <h2>Division Order Comparison</h2>
    <table>
        <tr>
            <th>GN Division</th>
            <th>Total prices of delivered orders</th>
            <th>Total prices of not delivered orders</th>
        </tr>
        <?php
        foreach ($gnDivisions as $index => $gnDivision) {
            echo "<tr>";
            echo "<td>" . $gnDivision . "</td>";
            echo "<td>" . $totalDeliveredPrices[$index] . "</td>";
            echo "<td>" . $totalNotDeliveredPrices[$index] . "</td>";
            echo "</tr>";
        }
        ?>
    </table>

    <!-- Chart.js script -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <canvas id="myChart" width="400" height="200"></canvas>
    <script>
        var ctx = document.getElementById('myChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: <?php echo json_encode($gnDivisions); ?>,
                datasets: [
                    {
                        label: 'Total prices of delivered orders',
                        data: <?php echo json_encode($totalDeliveredPrices); ?>,
                        backgroundColor: 'rgba(75, 192, 192, 0.5)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Total prices of not delivered orders',
                        data: <?php echo json_encode($totalNotDeliveredPrices); ?>,
                        backgroundColor: 'rgba(255, 99, 132, 0.5)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</body>
</html>


				</div>
				  </div>
				    </div>
            </footer>
					
					</div>
					
				

        </div>
    </div>






	
  
     <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
   <script src="js/jquery-3.3.1.slim.min.js"></script>
   <script src="js/popper.min.js"></script>
   <script src="js/bootstrap.min.js"></script>
   <script src="js/jquery-3.3.1.min.js"></script>
  
  
  <script type="text/javascript">
  $(document).ready(function () {
            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').toggleClass('active');
				$('#content').toggleClass('active');
            });
			
			 $('.more-button,.body-overlay').on('click', function () {
                $('#sidebar,.body-overlay').toggleClass('show-nav');
            });
			
        });


     
           
       
</script>
  
  



  </body>
  
  </html>


